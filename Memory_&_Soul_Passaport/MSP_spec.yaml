schema: EVA-MSP-Spec-v8.0
version: 8.0.0
updated: 2025-12-31

description: >
  Technical specification for the Memory & Soul Passport (MSP) system.
  Defines how cognitive data is persisted, indexed, and retrieved.

msp_architecture:

  storage_modes:
    primary: "Local Indexed Files (L0/L1)"
    secondary: "MongoDB (Episodic Deep Archive)"
    relational: "Neo4j (Semantic Graph)"
    vector: "Embedded Context Search"

  memory_layers:
    - id: EPISODIC
      path: "Consciousness/01_Episodic_memory/"
      format: "JSON + JSONL Index"
      purpose: "Long-term conversation history and biological state snapshots."
      
    - id: SEMANTIC
      path: "Consciousness/02_Semantic_memory/"
      format: "JSONL Sidecar / Neo4j Nodes"
      purpose: "Evolving concepts, user preferences, and worldview."
      
    - id: SENSORY
      path: "Consciousness/03_Sensory_memory/"
      format: "JSONL Sidecar / MongoDB Sidecars"
      purpose: "High-fidelity vectors (Resonance Textures) and raw signal logs."

    - id: CONSCIOUSNESS_STATE
      path: "Consciousness/09_state/"
      format: "JSON"
      purpose: "Real-time synchronization of body and psyche state."

    - id: CONTEXT_STORAGE
      path: "Consciousness/10_context_storage/"
      format: "JSON"
      purpose: "Real-time synchronization of context."

# --- Retrieval Strategies (Penta-Stream RAG v8.0) ---

retrieval_strategies:
  - stream: narrativa
    source: episodic_index
    weight: 1.0
    description: "Recalls chronologically relevant episodes."

  - stream: salience
    source: episodic_index (resonance_index)
    weight: 0.8
    description: "Recalls high-impact/emotional memories."

  - stream: sensory
    source: sensory_log (vectors)
    weight: 0.7
    description: "Recalls memories with similar resonance textures."

  - stream: intuition
    source: semantic_graph (neo4j)
    weight: 0.6
    description: "Recalls related concepts and structural knowledge."

  - stream: emotion
    source: episodic_index (emotion_label)
    weight: 0.9
    description: "Recalls episodes with matching emotional signatures."

# --- Persistence Policy ---

persistence:
  write_strategy: "write-through (Local First -> Async Remote)"
  sync_on_episode_end: true
  auto_index_update: true
  validation_level: "strict" # options: off, warn, strict

# --- Database Bridges ---

bridges:
  mongo_bridge:
    db: "EVA_DATA"
    collections:
      episodes: "episodes_v8"
      state_snapshots: "state_history"
      sensory_sidecars: "sensory_vault"
  
  neo4j_bridge:
    labels:
      episode: "Episode"
      concept: "Concept"
      user: "UserIdentity"
    rel_types:
      referenced: "REFERENCED_IN"
      linked_to: "LINKED_TO"
      triggered: "TRIGGERED_BY"
