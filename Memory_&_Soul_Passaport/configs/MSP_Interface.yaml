# MSP (Memory & Soul Passport) Interface
schema: MSP-Interface-v8.1.1
version: 8.1.1
updated: 2026-01-02

component: MSP (Memory & Soul Passport)
role: "Unified Memory Operating System & Central State Registry"

# Core Responsibilities:
# 1. Memory Persistence (Write/Read)
# 2. **State Registry (Single Source of Truth for Module States)**
# 3. Memory Retrieval (Query Interface)

downstream_services:
  - CIN (Context Injection Node)
  - Orchestrator
  - Any component requiring state/memory access
  - Dashboard (Visualization)

upstream_sources:
  - EVA Matrix (9D State)
  - RMS (Resonance State)
  - LLM Proposals (Memory Updates)
  - Physio Core (Bio-State)
  - **All System Modules (State Registration)**

# ==========================================================
# STATE REGISTRY API
# ==========================================================
state_registry_methods:
  
  register_module_state:
    description: "Register or update a module's current operational state."
    parameters:
      - module_name: string (e.g., 'eva_matrix', 'physio_core', 'cin')
      - state_data: dict (module-specific state object)
      - metadata: dict (optional: update_frequency, source, dependencies)
    returns: bool (success/failure)
    storage: "09_state/{module_name}_state.json"
    
  get_module_state:
    description: "Retrieve the current state of a specific module."
    parameters:
      - module_name: string
    returns: dict (module state) or None
    
  get_all_states:
    description: "Retrieve current state of all registered modules (system snapshot)."
    returns: dict (module_name -> state_data)
    use_case: "System health checks, debugging, state serialization"

methods:
  - name: commit_memory
    input: "Memory Proposal + Matrix State + RMS Encoding"
    output: "Memory ID (UUID)"
  
  - name: retrieve_context
    input: "Query Vector / Tags"
    output: "Memory List"
