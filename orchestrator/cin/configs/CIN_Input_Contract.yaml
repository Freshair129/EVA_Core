# CIN (Context Injection Node) Input Contract
# version: 8.1.0-R1
# Date: 2026-01-03
# Status: GKS (Genesis Knowledge System) Standardized

schema: EVA-CIN-Input-Contract-v1
module: CIN (Context Injection Node)
role: input_registry

# ============================================================
# 1. IDENTITY & STATIC CONTEXT (SSOT)
# ============================================================
identity:
  persona_yaml:
    type: "string"
    source: "orchestrator/pmt/configs/persona.yaml"
    required: true
  soul_md_context:
    type: "string"
    source: "orchestrator/pmt/docs/soul.md"
    required: true

# ============================================================
# 2. PHYSIOLOGICAL STATE (Via Physiological Controller)
# ============================================================
physiology:
  - id: "physio_controller"
    module: PhysioController (Physiological Controller)
    contract_path: "contract/upstream_contract/Physio_Contract/Input_from_PhysioController_Contract.yaml"
    required: true

# ============================================================
# 3. MEMORY & STATE CONTEXT (Via Memory & Soul Passport)
# ============================================================
memory_and_state:
  - id: "msp_context"
    module: MSP (Memory & Soul Passport)
    contract_path: "contract/upstream_contract/MSP_Contract/Input_from_MSP_Contract.yaml"
    required: true
    description: "Includes Turn Cache, Session Memory, and Quick Recall (Intuition)."

# ============================================================
# 4. USER STIMULUS
# ============================================================
stimulus:
  user_input:
    type: "string"
    required: true
  
  user_semantic_anchors:
    type: "string"
    description: "Extracted concepts from current turn"
    required: true

# ============================================================
# 5. INVARIANTS
# ============================================================
invariants:
  - "Phase Separation: Phase 2 data (Deep RAG, Physio Delta) must not be processed before Phase 1."
  - "Data Completeness: Always fallback to default persona if file is missing."
  - "Versioning: All inputs must match project version 8.1.0."
