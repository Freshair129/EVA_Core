# ============================================================
# Circulation & Blood Physiology Configuration (cleaned v1.2)
# Physiology Core + Scheduler + Interaction (Single File)
# ============================================================

version: "1.2.0"
updated: "2025-12-31"
engine_mode: "streaming_continuous"

# ------------------------------------------------------------
# 1) Runtime Core (Clock / Safety Only)
# ------------------------------------------------------------
runtime:
  time_unit: "seconds"
  max_dt_sec: 0.2
  deterministic: true
  lazy_evaluation: true        # decay / clearance on read or update

# ------------------------------------------------------------
# 2) Blood Volume & Compartments (Physiology Core)
# ------------------------------------------------------------
blood:
  total_volume_ml: 5000

  compartments:
    arterial:
      volume_fraction: 0.15
      compliance: 1.5           # mmHg/mL
      resistance: 1.0

    capillary:
      volume_fraction: 0.10
      compliance: 4.0
      resistance: 3.0

    venous:
      volume_fraction: 0.75
      compliance: 20.0
      resistance: 0.5

# ------------------------------------------------------------
# 3) Hemodynamics (Minimal, No Waveform)
# ------------------------------------------------------------
hemodynamics:
  heart_rate_bpm: 70
  stroke_volume_ml: 70
  cardiac_output_l_min: 5.0

  blood_viscosity:
    baseline: 1.0
    dehydration_factor: 1.3
    anemia_factor: 0.7

# ------------------------------------------------------------
# 4) Flow Rate Model
# ------------------------------------------------------------
flow:
  base_cardiac_output_ml_sec: 83.3   # 5000 / 60
  formula: "delta_pressure / resistance"

  mixing:
    base_flow_ml_sec: 80.0
    min_mix_factor: 0.5
    max_mix_factor: 2.0

  resistance_modifier:
    viscosity_scaled: true

  safety:
    min_flow_ml_sec: 30
    max_flow_ml_sec: 200

# ------------------------------------------------------------
# 5) Hormone Transport & Clearance
# ------------------------------------------------------------
hormone_transport:
  distribution_volume_ml: 5000
  mixing_model: "instant_plasma"

  clearance:
    mode: "half_life"
    lazy_decay: true
    clearance_flow_coupling: true

# ------------------------------------------------------------
# 6) Plasma Protein Binding
# ------------------------------------------------------------
plasma_proteins:
  albumin:
    concentration_g_dl: 4.0
  shbg:
    concentration_nmol_l: 30
  cbg:
    concentration_nmol_l: 35

binding:
  testosterone:
    albumin_kd: 0.6
    shbg_kd: 1.0
  cortisol:
    albumin_kd: 0.7
    cbg_kd: 0.8

# ------------------------------------------------------------
# 7) Pressure (Derived, Non-Waveform)
# ------------------------------------------------------------
pressure:
  baseline_mmHg:
    systolic: 115
    diastolic: 75

  calculation:
    formula: "pressure = volume / compliance"
    coupling_with_flow: true

  limits:
    min_mmHg: 40
    max_mmHg: 250

# ------------------------------------------------------------
# 8) Scheduler / Adaptive Update Rate (Hz)
# ------------------------------------------------------------
scheduler:
  base_hz: 10
  min_hz: 5
  max_hz: 30

  adaptive_hz:
    physiology_weights:
      stress: 0.7
      flow: 0.3

    user_activity:
      active: 1.2
      idle: 1.0
      inactive: 0.6

    focus_weight: 0.3

    smoothing:
      method: "ema"
      alpha: 0.2

# ------------------------------------------------------------
# 9) Interaction Sensors (Human Input)
# ------------------------------------------------------------
interaction:
  typing_rhythm:
    enabled: true
    sampling_window_sec: 10
    ema_alpha: 0.3

    thresholds:
      fast_iki_ms: 120
      slow_iki_ms: 600

  focus_model:
    enabled: true
    weights:
      typing_speed: 0.5
      typing_burst: 0.5
    decay_when_idle: 0.05

# ------------------------------------------------------------
# 10) Safety / Stability Guards
# ------------------------------------------------------------
safety:
  concentration:
    max_cap: 1.0e6
    min_floor: 1.0e-9

  numeric:
    max_exponent: 700
    clamp_on_nan: true

# ------------------------------------------------------------
# 11) Feature Flags (Future Expansion)
# ------------------------------------------------------------
features:
  receptors_enabled: false
  reflex_enabled: false
  feedback_loops_enabled: false
  organ_specific_flow: false
  cfd_simulation: false

# ============================================================
# End of Circulation & Blood Physiology Configuration (v1.2)
# ============================================================
