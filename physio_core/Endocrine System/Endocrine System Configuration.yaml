# ============================================================
# Endocrine System Configuration
# Version: 9.0
# Scope: Hormone production & gland regulation ONLY
# ============================================================

version: "9.0"
system: "EndocrineSystem"
description: >
  Endocrine production and regulation layer.
  This config governs gland behavior, inventory dynamics,
  adaptation, and stimulus-to-hormone mass conversion.
  Blood transport and clearance are handled externally.

# ------------------------------------------------------------
# Global endocrine settings
# ------------------------------------------------------------
global:
  time_unit: "seconds"

  stimulus:
    input_range: [0.0, 1.0]
    surge_threshold: 0.8        # threshold for nerve surge
    tonic_threshold: 0.05       # minimum stimulus for tonic drive

  safety:
    max_release_fraction: 0.40  # max % of inventory released in surge
    min_inventory_pct: 0.01     # below this → exhausted
    fatigue_inventory_pct: 0.15 # below this → fatigue

# ------------------------------------------------------------
# Gland defaults (used if hormone does not override)
# ------------------------------------------------------------
defaults:
  inventory:
    max_capacity: 1000.0        # pg
    refill_rate_base: 1.0       # pg/sec

  secretion:
    max_output_dt: 10.0         # pg/sec
    latency_sec: 10.0           # drive decay time constant

  adaptation:
    min: 0.1
    max: 1.0
    fatigue_rate: 0.05          # per stimulus per sec
    recovery_rate: 0.02         # per sec (no stimulus)

  drive:
    max: 10.0
    accumulation_gain: 2.0
    surge_gain: 5.0

# ------------------------------------------------------------
# Hormone / Gland definitions
# ------------------------------------------------------------
glands:

  AD:
    name: "Adrenaline"
    inventory:
      max_capacity: 1500.0
      refill_rate_base: 1.2

    secretion:
      max_output_dt: 25.0
      latency_sec: 2.0

    stimulus_mapping:
      acute_threat: 1.0
      panic_event: 0.9
      high_arousal: 0.5
      safety_signal: -0.8
      deep_breathing: -0.5


  COR:
    name: "Cortisol"
    inventory:
      max_capacity: 5000.0
      refill_rate_base: 0.4

    secretion:
      max_output_dt: 5.0
      latency_sec: 300.0

    stimulus_mapping:
      chronic_stress: 0.9
      uncertainty: 0.7
      meditation: -0.4
      successful_resolution: -0.6


  DA:
    name: "Dopamine"
    inventory:
      max_capacity: 3000.0
      refill_rate_base: 0.8

    secretion:
      max_output_dt: 15.0
      latency_sec: 0.5

    stimulus_mapping:
      achievement: 1.0
      novelty: 0.8
      boredom: -0.4
      failure_event: -0.6


  OXT:
    name: "Oxytocin"
    inventory:
      max_capacity: 2000.0
      refill_rate_base: 0.3

    secretion:
      max_output_dt: 8.0
      latency_sec: 15.0

    stimulus_mapping:
      physical_touch: 1.0
      trust_event: 0.9
      social_distance: -0.4
      betrayal_event: -1.0


  MEL:
    name: "Melatonin"
    inventory:
      max_capacity: 2000.0
      refill_rate_base: 0.4

    secretion:
      max_output_dt: 12.0
      latency_sec: 1800.0

    stimulus_mapping:
      darkness: 1.0
      blue_light_exposure: -1.0
      morning_sun: -0.8

# ------------------------------------------------------------
# Notes / invariants
# ------------------------------------------------------------
invariants:
  - Endocrine system outputs hormone mass only (pg)
  - No plasma concentration logic allowed
  - No clearance or half-life allowed
  - BloodEngine is the sole owner of decay & transport
  - Glands must be deterministic and bounded
