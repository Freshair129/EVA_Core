# Resonance Index (RI) Input Contract
# Version: 8.1.0
# Date: 2026-01-03
# Description: Specifies the required inputs for calculating the Resonance Index.

schema: EVA-RI-Input-Contract-v8.1
version: 8.1.0
updated: 2026-01-03

# ============================================================
# INPUT SPECIFICATION
# ============================================================
inputs:
  memory_data:
    type: "Dict[str, Any]"
    required: true
    source: "Hept_Stream_RAG"
    contract_path: "contract/upstream/HeptStreamRAG_Contract/Input_from_HeptStreamRAG_Contract.yaml"
    description: "The memory node or data structure to evaluate for resonance."
    properties:
      text: {type: "string", description: "The content of the memory."}
      timestamp: {type: "string", description: "When the memory was recorded."}
      tags: {type: "List[str]", description: "Associated keywords or tags."}
      metadata: {type: "Dict[str, Any]", description: "Additional contextual data."}

  context_anchors:
    type: "Dict[str, Any]"
    required: true
    source: "CIN"
    contract_path: "contract/upstream/CIN_Contract/Input_from_CIN_Contract.yaml"
    description: "Current cognitive and environmental context anchors."
    properties:
      current_input: {type: "string", description: "The latest user input."}
      active_personas: {type: "List[str]", description: "Currently active identity fragments."}
      temporal_context: {type: "string", description: "Current time and session duration."}

  physiological_state:
    type: "Dict[str, float]"
    required: false
    description: "Current autonomic and endocrine signals from physio_core."
    properties:
      cortisol: {type: "float", range: [0.0, 1.0]}
      adrenaline: {type: "float", range: [0.0, 1.0]}
      ans_balance: {type: "float", range: [-1.0, 1.0], description: "Sympathetic vs Parasympathetic balance."}

# ============================================================
# VALIDATION RULES
# ============================================================
validation_rules:
  - "memory_data must contain at least 'text' or 'tags' for comparison."
  - "context_anchors must not be empty."
  - "Missing physiological_state will result in a default neutral weight (0.5)."
