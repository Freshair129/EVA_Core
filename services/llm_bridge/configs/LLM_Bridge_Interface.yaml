# LLM (Large Language Model) Bridge Interface Specification
# Version: 8.1.0
# Date: 2026-01-02

meta:
  component_name: "LLM (Large Language Model) Bridge"
  component_type: "API Communication Gateway"
  version: "8.1.0"
  role: "Gemini API integration with Function Calling and Dual-Phase support."
  analogy: "Broca's & Wernicke's Areas (ศูนย์การตีความและผลิตภาษา)"

# ============================================================
# 1. DUAL-PHASE PROTOCOL
# ============================================================
protocol:
  phase_1_perception:
    description: "Send rough context to identify intent and trigger physiological change."
    tools: ["sync_biocognitive_state"]
    expected_output: "Function Call (stimulus_vector, tags)"

  phase_2_reasoning:
    description: "Resume inference with deep physiological and memory context."
    input: "Function Execution Result"
    expected_output: "Final Response + Context Summary"

# ============================================================
# 2. FUNCTION DEFINITION (sync_biocognitive_state)
# ============================================================
functions:
  - name: "sync_biocognitive_state"
    parameters:
      stimulus_vector:
        type: "object"
        properties:
          valence: "float [-1, 1]"
          arousal: "float [0, 1]"
          intensity: "float [0, 1]"
          stress: "float [0, 1]"
      tags:
        type: "array"
        items: "string"
        description: "Keywords for memory retrieval"

# ============================================================
# 3. INTERFACE METHODS
# ============================================================
interface_methods:
  - method: "generate(prompt: str, context_id: str) -> LLMResponse"
    description: "Initial completion request (Phase 1)"
  
  - method: "continue_with_result(function_result: str, context_id: str) -> LLMResponse"
    description: "Resumes conversation after 'The Gap' processing (Phase 2)"

# ============================================================
# 4. CONSTRAINTS & ERROR HANDLING
# ============================================================
constraints:
  max_tokens: 4096
  temperature: 0.7
  timeout: "30s"
  retry_policy: "Exponential backoff (3 retries)"
  bilingual_integrity: "Must match user input language (Thai/English)"
